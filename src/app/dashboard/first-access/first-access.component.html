<div class="modal-backdrop" *ngIf="showModal"></div>

<div class="d-flex align-items-center justify-content-center position-fixed top-0 start-0 w-100 h-100" style="z-index: 1001;" [class.d-flex]="showModal" [class.d-none]="!showModal">
  <div class="container">
    <div class="card shadow mx-auto" style="max-width: 800px;">
      <div class="card-body p-5">
        <div class="text-center mb-4" *ngIf="currentStep !== 5">
          <h2 class="fw-bold">Junte-se ao time Aleevia</h2>
          <p class="text-muted">Preencha o formul√°rio abaixo para se cadastrar na Aleevia.</p>
        </div>
        
        <app-stepper 
          *ngIf="currentStep !== 5"
          [currentStep]="currentStep"
          [totalSteps]="totalSteps"
          [stepTitles]="stepTitles">
        </app-stepper>
        
        <!-- Personal Info Form -->
        <app-personal-info 
          *ngIf="currentStep === 1"
          [formGroup]="personalInfoForm"
          [errorMessages]="errorMessages"
          (formSubmit)="nextStep()">
        </app-personal-info>
        
        <!-- Professional Info Form -->
        <app-professional-info 
          *ngIf="currentStep === 2"
          [formGroup]="professionalInfoForm"
          [errorMessages]="errorMessages"
          [professions]="professions"
          [specialties]="specialties"
          [subspecialties]="subspecialties"
          (formSubmit)="nextStep()"
          (previous)="previousStep()"
          (professionChange)="onProfessionChange($event)"
          (specialtyChange)="onSpecialtyChange($event)">
        </app-professional-info>
        
        <!-- Social Info Form -->
        <app-social-info
          *ngIf="currentStep === 3"
          [formGroup]="socialInfoForm"
          [errorMessages]="errorMessages"
          [profilePictureUrl]="profilePictureUrl"
          [isUploading]="isUploading"
          (formSubmit)="nextStep()"
          (previous)="previousStep()"
          (profileImageChange)="changeProfileImage()">
        </app-social-info>
        
        <!-- Security Form -->
        <app-security-info
          *ngIf="currentStep === 4"
          [formGroup]="securityForm"
          [errorMessages]="errorMessages"
          (formSubmit)="nextStep()"
          (previous)="previousStep()">
        </app-security-info>
        
        <!-- Success Modal -->
        <app-success-modal
          *ngIf="currentStep === 5"
          [currentUser]="currentUser"
          (configureSchedule)="onConfigureSchedule()"
          (goToDashboard)="onGoToDashboard()">
        </app-success-modal>
      </div>
    </div>
  </div>
</div>
